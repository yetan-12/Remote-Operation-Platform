import{c as _,r as s,j as e,B as g,E as Le}from"./index-DY71TD0q.js";import{C as Ge,P as T,a as F,r as ue,h as D}from"./placeholders-CDPA95X-.js";import{G as E,X as re}from"./x-B4cQ6gMC.js";import{C as He,M as w,a as ae,H as ie,R as Oe}from"./rotate-ccw-ULH9JjFz.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ve=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],k=_("check",Ve);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const We=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],C=_("circle",We);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ye=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],Fe=_("octagon-alert",Ye);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Te=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],_e=_("trash-2",Te);function Ue({onBack:$,onProceed:j,clipInfo:a}){const[p,L]=s.useState(""),[n,A]=s.useState(!1),S=()=>{n&&p.trim()&&j(p)};return e.jsx("div",{className:"flex-1 flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-2 md:p-4 overflow-hidden",children:e.jsxs("div",{className:"max-w-3xl w-full h-full max-h-screen flex flex-col py-2",children:[e.jsxs("button",{onClick:$,className:"mb-2 flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors flex-shrink-0",children:[e.jsx(Ge,{size:20}),e.jsx("span",{className:"text-sm",children:"返回设备选择"})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden flex-1 flex flex-col min-h-0",children:[e.jsxs("div",{className:"border-b border-gray-200 p-3 md:p-6 bg-gray-50 flex-shrink-0",children:[e.jsx("h2",{className:"text-base md:text-lg font-semibold text-gray-900 mb-1",children:"Clip 设置"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500",children:"请输入任务提示并准备开始录制"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"p-3 md:p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-xs md:text-sm font-medium text-gray-900 mb-3 md:mb-4",children:"当前 Clip"}),e.jsx("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-3 md:p-4",children:a.armMode==="single"?e.jsxs("div",{className:"grid grid-cols-3 gap-2 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Clip ID"}),e.jsx("div",{className:"text-xs md:text-sm font-medium text-gray-900",children:a.clipId})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"机械臂"}),e.jsx("div",{className:"text-xs md:text-sm font-medium text-gray-900",children:a.arm1Device})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"操作器"}),e.jsx("div",{className:"text-xs md:text-sm font-medium text-gray-900",children:a.arm1Controller})]})]}):e.jsxs("div",{className:"space-y-2 md:space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Clip ID"}),e.jsx("div",{className:"text-xs md:text-sm font-medium text-gray-900",children:a.clipId})]}),a.armMode==="single"?e.jsxs("div",{className:"grid grid-cols-2 gap-2 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"设备"}),e.jsx("div",{className:"text-xs md:text-sm font-medium text-gray-900",children:a.arm1Device})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"控制器"}),e.jsx("div",{className:"text-xs md:text-sm font-medium text-gray-900",children:a.arm1Controller})]})]}):a.arm1Controller==="GAMEPAD"?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"左臂手柄"}),e.jsx("div",{className:"text-xs md:text-sm font-medium text-gray-900",children:a.arm1Device})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"右臂手柄"}),e.jsx("div",{className:"text-xs md:text-sm font-medium text-gray-900",children:a.arm2Device})]})]})}):e.jsxs("div",{className:"grid grid-cols-2 gap-2 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"设备"}),e.jsx("div",{className:"text-xs md:text-sm font-medium text-gray-900",children:a.arm1Device})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"控器"}),e.jsx("div",{className:"text-xs md:text-sm font-medium text-gray-900",children:a.arm1Controller})]})]})]})})]}),e.jsxs("div",{className:"p-3 md:p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-xs md:text-sm font-medium text-gray-900 mb-2 md:mb-3",children:"任务提示 (Prompt)"}),e.jsx("textarea",{value:p,onChange:c=>L(c.target.value),placeholder:'请输入当前Clip的任务提示，例如："将机器人由初始位置移动至摆放台上"',className:"w-full h-24 md:h-32 px-3 md:px-4 py-2 md:py-3 text-xs md:text-sm text-gray-700 bg-gray-50 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"快速模板："}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["将物体从A点移动到B点","抓取桌面上的物体并放置��指位置","执行物体分拣任务","完成精密组装操作","拾取并堆叠多个物体","执行物体翻转操作"].map((c,R)=>e.jsx("button",{onClick:()=>L(c),className:"px-3 py-1.5 text-xs bg-white border border-gray-300 rounded-lg hover:bg-blue-50 hover:border-blue-400 hover:text-blue-600 transition-colors",children:c},R))})]})]})]}),e.jsxs("div",{className:"p-3 md:p-6 bg-gray-50 flex-shrink-0 border-t border-gray-200",children:[e.jsx("h3",{className:"text-xs md:text-sm font-medium text-gray-900 mb-2 md:mb-3",children:"设备状态"}),a.armMode==="single"?e.jsxs("div",{className:"mb-3 md:mb-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{size:8,className:n?"text-green-500 fill-green-500":"text-gray-400 fill-gray-400"}),e.jsxs("span",{className:"text-xs md:text-sm text-gray-700",children:["控制方式：",a.arm1Controller]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{size:8,className:n?"text-green-500 fill-green-500":"text-gray-400 fill-gray-400"}),e.jsxs("span",{className:"text-xs md:text-sm text-gray-700",children:["当前设备：",a.arm1Device]}),e.jsx("span",{className:"text-xs text-gray-500 ml-auto",children:n?"已准备就绪":"等待准备"})]})]}):a.arm1Controller==="GAMEPAD"?e.jsxs("div",{className:"mb-3 md:mb-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{size:8,className:n?"text-green-500 fill-green-500":"text-gray-400 fill-gray-400"}),e.jsxs("span",{className:"text-xs md:text-sm text-gray-700",children:["控制方式：",a.arm1Controller]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{size:8,className:n?"text-green-500 fill-green-500":"text-gray-400 fill-gray-400"}),e.jsxs("span",{className:"text-xs md:text-sm text-gray-700",children:["左臂设备：",a.arm1Device]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{size:8,className:n?"text-green-500 fill-green-500":"text-gray-400 fill-gray-400"}),e.jsxs("span",{className:"text-xs md:text-sm text-gray-700",children:["右臂设备：",a.arm2Device]}),e.jsx("span",{className:"text-xs text-gray-500 ml-auto",children:n?"已准备就绪":"等待准备"})]})]}):e.jsxs("div",{className:"mb-3 md:mb-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{size:8,className:n?"text-green-500 fill-green-500":"text-gray-400 fill-gray-400"}),e.jsxs("span",{className:"text-xs md:text-sm text-gray-700",children:["控制方式：",a.arm1Controller]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(C,{size:8,className:n?"text-green-500 fill-green-500":"text-gray-400 fill-gray-400"}),e.jsxs("span",{className:"text-xs md:text-sm text-gray-700",children:["当前设备：",a.arm1Device]}),e.jsx("span",{className:"text-xs text-gray-500 ml-auto",children:n?"已准备就绪":"等待准备"})]})]}),e.jsxs("div",{className:"flex gap-2 md:gap-3",children:[e.jsxs(g,{onClick:()=>A(!n),className:`flex-1 h-9 md:h-10 flex items-center justify-center gap-1.5 md:gap-2 ${n?"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50":p.trim()?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,disabled:!p.trim(),children:[e.jsx(k,{size:14,className:"md:w-4 md:h-4"}),e.jsx("span",{className:"text-xs md:text-sm font-medium",children:n?"取消连接":"准备连接设备"})]}),e.jsxs(g,{onClick:S,className:"flex-1 bg-green-600 hover:bg-green-700 text-white h-9 md:h-10 flex items-center justify-center gap-1.5 md:gap-2",disabled:!n,children:[e.jsx(T,{size:14,fill:"white",className:"md:w-4 md:h-4"}),e.jsx("span",{className:"text-xs md:text-sm font-medium",children:"开始录制"})]})]})]})]}),e.jsx("div",{className:"mt-2 px-3 md:px-4 py-2 md:py-3 bg-gray-50 border border-gray-300 rounded-lg flex-shrink-0",children:e.jsx("p",{className:"text-xs text-gray-600",children:'点击"准备"后，请确保设备就位，然后点击"开始录制"进入采集界面'})})]})})}function tt(){const[$,j]=s.useState("idle"),[a,p]=s.useState(!0),[L,n]=s.useState(!0),[A,S]=s.useState(!1),[c,R]=s.useState(""),[m,U]=s.useState(""),[Be,be]=s.useState(""),[Xe,pe]=s.useState(""),[fe,G]=s.useState(!1),[y,H]=s.useState(null),[B,le]=s.useState(!1),[f,de]=s.useState(null),[je,ne]=s.useState(!1),[o,X]=s.useState(""),[h,oe]=s.useState(""),[Ke,K]=s.useState(""),[qe,q]=s.useState(!1),[ye,ve]=s.useState(1),[i,z]=s.useState(null),[r,O]=s.useState({left:{x:0,y:0},right:{x:0,y:0},hand:{x:0,y:0}}),[x,M]=s.useState({left:{width:0,height:0},right:{width:0,height:0},hand:{width:0,height:0}}),[b,ce]=s.useState(null),[J,Ne]=s.useState({x:0,y:0}),[v,xe]=s.useState(null),[P,we]=s.useState({x:0,y:0,width:0,height:0}),[me,V]=s.useState(!1),[he,W]=s.useState(!1),Y=t=>{if(me||he){V(!1),W(!1);return}O(d=>({...d,[t]:{x:0,y:0}})),M(d=>({...d,[t]:{width:0,height:0}})),z(i===null?t:i===t?null:i==="both"?t==="left"?"right":"left":"both")},Q=(t,d)=>{d.stopPropagation(),O(l=>({...l,[t]:{x:0,y:0}})),M(l=>({...l,[t]:{width:0,height:0}}))},Z=(t,d)=>{if(t.target.closest("button"))return;t.preventDefault(),t.stopPropagation(),V(!1),ce(d);const l=t.currentTarget.getBoundingClientRect();Ne({x:t.clientX-l.left,y:t.clientY-l.top}),M(u=>({...u,[d]:{width:l.width,height:l.height}}))},I=(t,d)=>{var u;t.preventDefault(),t.stopPropagation(),W(!1),xe(d);const l=(u=t.currentTarget.closest(".pip-container"))==null?void 0:u.getBoundingClientRect();l&&we({x:t.clientX,y:t.clientY,width:l.width,height:l.height})};s.useEffect(()=>{const t=l=>{if(b&&(V(!0),O(u=>({...u,[b]:{x:l.clientX-J.x,y:l.clientY-J.y}}))),v){W(!0);const u=l.clientX-P.x,Re=l.clientY-P.y,Me=Math.max(150,P.width+u),Pe=Math.max(100,P.height+Re);M(Ee=>({...Ee,[v]:{width:Me,height:Pe}}))}},d=()=>{ce(null),xe(null)};if(b||v)return document.addEventListener("mousemove",t),document.addEventListener("mouseup",d),()=>{document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",d)}},[b,v,J,P]);const[ee,te]=s.useState(0);s.useEffect(()=>{let t=null;return $==="recording"&&(t=setInterval(()=>{te(d=>d+1)},1e3)),()=>{t&&clearInterval(t)}},[$]);const Ce=t=>{const d=Math.floor(t/3600),l=Math.floor(t%3600/60),u=t%60;return`${d.toString().padStart(2,"0")}:${l.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}`},ke=[{id:"FRANKA-01",name:"FRANKA-01",status:"available",isDual:!1},{id:"FRANKA-02",name:"FRANKA-02",status:"in-use",isDual:!1},{id:"UR5-01",name:"UR5-01",status:"available",isDual:!1},{id:"UR5-02",name:"UR5-02",status:"available",isDual:!1},{id:"DUAL-ARM-01",name:"双臂系统",status:"available",isDual:!0}],Se=[{id:"GELLOW",name:"GELLOW"},{id:"VR",name:"VR"},{id:"GAMEPAD",name:"手柄"}],ze={GELLOW:[{id:"GELLOW-01",name:"GELLOW-01",status:"available"},{id:"GELLOW-02",name:"GELLOW-02",status:"available"},{id:"GELLOW-03",name:"GELLOW-03",status:"in-use"}],VR:[{id:"VR-01",name:"VR-01",status:"available"},{id:"VR-02",name:"VR-02",status:"available"}],GAMEPAD:[{id:"GAMEPAD-01",name:"手柄-01",status:"available"},{id:"GAMEPAD-02",name:"手柄-02",status:"available"},{id:"GAMEPAD-03",name:"手柄-03",status:"in-use"}]},N=c==="DUAL-ARM-01",se=()=>m?ze[m]||[]:[],ge=()=>!(!c||!m||!o||N&&m==="GAMEPAD"&&!h),De=[{id:"C1225-09",description:"将机械臂移到至指定的置0度",time:"14:32",duration:"00:42",frames:1608},{id:"C1225-07",description:"将夹住方形积木移至色盘上方",time:"14:28",duration:"00:35",frames:21},{id:"C1225-06",description:"夹取摆放干磁吸组件并扫描片",time:"14:21",duration:"00:51",frames:30},{id:"C1225-05",description:"机械臂回到初始位置",time:"14:15",duration:"00:28",frames:17},{id:"C1225-04",description:"抓取蓝色方块放置到指定位置",time:"14:10",duration:"00:45",frames:27},{id:"C1225-03",description:"检测并校准机械臂位置",time:"14:05",duration:"00:38",frames:23},{id:"C1225-02",description:"打开夹爪并准备抓取",time:"14:00",duration:"00:32",frames:19},{id:"C1225-01",description:"机械臂初始化测试",time:"13:55",duration:"00:25",frames:15}],$e={id:(()=>{const t=new Date,d=String(t.getMonth()+1).padStart(2,"0"),l=String(t.getDate()).padStart(2,"0"),u=String(De.length+1).padStart(2,"0");return`C${d}${l}-${u}`})(),time:new Date().toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})},Ae=t=>t==="SE-20251217-002"?[{id:"Clip-012",description:"复位机��臂到初始位置",time:"16:20",duration:"00:38",frames:23},{id:"Clip-011",description:"拾取红色立方并放置",time:"16:15",duration:"00:52",frames:31},{id:"Clip-010",description:"调整夹爪角度进行抓取",time:"16:10",duration:"00:41",frames:25},{id:"Clip-009",description:"移动到指定工作区域",time:"16:05",duration:"00:35",frames:21},{id:"Clip-008",description:"扫描工作台上的物",time:"16:00",duration:"00:48",frames:29},{id:"Clip-007",description:"精确定位目标位置",time:"15:55",duration:"00:33",frames:20},{id:"Clip-006",description:"缓慢接近抓取目标",time:"15:50",duration:"00:44",frames:26},{id:"Clip-005",description:"张开夹爪准备抓取",time:"15:45",duration:"00:29",frames:17},{id:"Clip-004",description:"检夹爪状态",time:"15:40",duration:"00:36",frames:22},{id:"Clip-003",description:"移动到观察点",time:"15:35",duration:"00:42",frames:25},{id:"Clip-002",description:"校准机械臂姿态",time:"15:30",duration:"00:39",frames:23},{id:"Clip-001",description:"机械臂系统初始化",time:"15:25",duration:"00:31",frames:19}]:t==="SE-20251216-001"?[{id:"Clip-023",description:"完成整个工作流程",time:"15:45",duration:"00:55",frames:33},{id:"Clip-022",description:"将工具放回工具架",time:"15:40",duration:"00:47",frames:28},{id:"Clip-021",description:"组装最后一个部件",time:"15:35",duration:"00:51",frames:31},{id:"Clip-020",description:"精确对齐组件",time:"15:30",duration:"00:43",frames:26},{id:"Clip-019",description:"拾取第三个部件",time:"15:25",duration:"00:39",frames:23},{id:"Clip-018",description:"放置第二个组件",time:"15:20",duration:"00:46",frames:28},{id:"Clip-017",description:"调整组件方向",time:"15:15",duration:"00:42",frames:25},{id:"Clip-016",description:"抓取第二个部件",time:"15:10",duration:"00:38",frames:23},{id:"Clip-015",description:"放置第一个组件到位",time:"15:05",duration:"00:44",frames:26},{id:"Clip-014",description:"移动到装配位置",time:"15:00",duration:"00:40",frames:24},{id:"Clip-013",description:"检查组完整性",time:"14:55",duration:"00:36",frames:22},{id:"Clip-012",description:"拾取第一个组件",time:"14:50",duration:"00:48",frames:29},{id:"Clip-011",description:"扫描���有工作部件",time:"14:45",duration:"00:52",frames:31},{id:"Clip-010",description:"调整工作台高度",time:"14:40",duration:"00:35",frames:21},{id:"Clip-009",description:"移动到工作起始点",time:"14:35",duration:"00:41",frames:25},{id:"Clip-008",description:"测试夹爪力度",time:"14:30",duration:"00:33",frames:20},{id:"Clip-007",description:"校准传感器读数",time:"14:25",duration:"00:38",frames:23},{id:"Clip-006",description:"检测环境光照",time:"14:20",duration:"00:29",frames:17},{id:"Clip-005",description:"设置工作区边界",time:"14:15",duration:"00:45",frames:27},{id:"Clip-004",description:"测试关节活动范围",time:"14:10",duration:"00:42",frames:25},{id:"Clip-003",description:"校准各轴位置",time:"14:05",duration:"00:37",frames:22},{id:"Clip-002",description:"运行统自检",time:"14:00",duration:"00:40",frames:24},{id:"Clip-001",description:"机械臂上电初始化",time:"13:55",duration:"00:34",frames:20}]:[];return s.useEffect(()=>(B?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[B]),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[a&&L&&!A&&e.jsx("div",{className:"flex-1 bg-gradient-to-br from-blue-50 to-indigo-100 overflow-hidden p-4 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-6xl w-full mx-auto h-full flex flex-col justify-center py-2",children:[e.jsxs("div",{className:"text-center mb-2 md:mb-3 flex-shrink-0",children:[e.jsx("h1",{className:"text-base md:text-lg font-bold text-gray-900 mb-1",children:"设备配置"}),e.jsx("p",{className:"text-xs text-gray-600",children:"请选择机械臂和控制器"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-1 min-h-0",children:e.jsxs("div",{className:"mb-3 md:mb-4",children:[e.jsx("h2",{className:"text-xs md:text-sm font-semibold text-gray-900 mb-1.5",children:"机械臂选择"}),e.jsxs("div",{className:"mb-2 md:mb-3",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-700 mb-1",children:"选择机械臂类型"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-1.5 md:gap-2",children:ke.map(t=>e.jsxs("button",{onClick:()=>t.status==="available"&&R(t.id),disabled:t.status==="in-use",className:`group relative bg-white rounded-lg p-1.5 md:p-2 border-2 transition-all duration-300 ${t.status==="in-use"?"border-gray-200 opacity-50 cursor-not-allowed":c===t.id?"border-blue-500 bg-blue-50 shadow-lg":"border-gray-200 hover:border-blue-400 hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 mb-1 rounded-full flex items-center justify-center ${t.status==="in-use"?"bg-gray-100":c===t.id?"bg-blue-500":"bg-gray-100 group-hover:bg-blue-100"}`,children:t.isDual?e.jsxs("div",{className:"flex items-center gap-0.5",children:[e.jsx(F,{size:12,className:`${t.status==="in-use"?"text-gray-400":c===t.id?"text-white":"text-gray-600 group-hover:text-blue-600"}`}),e.jsx(F,{size:12,className:`${t.status==="in-use"?"text-gray-400":c===t.id?"text-white":"text-gray-600 group-hover:text-blue-600"}`})]}):e.jsx(F,{size:16,className:`md:w-5 md:h-5 ${t.status==="in-use"?"text-gray-400":c===t.id?"text-white":"text-gray-600 group-hover:text-blue-600"}`})}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-0.5 text-xs",children:t.name}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${t.status==="in-use"?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:t.status==="in-use"?"使用中":"空闲"})]}),c===t.id&&e.jsx("div",{className:"absolute top-1 right-1 w-4 h-4 rounded-full bg-blue-500 flex items-center justify-center",children:e.jsx(k,{size:10,className:"text-white"})})]},t.id))})]}),c&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-700 mb-1",children:"选择控制方式"}),e.jsx("div",{className:"grid grid-cols-3 gap-1.5 md:gap-2",children:Se.map(t=>e.jsxs("button",{onClick:()=>{U(t.id),X(""),oe("")},className:`group relative bg-white rounded-lg p-1.5 md:p-2 border-2 transition-all duration-300 ${m===t.id?"border-green-500 bg-green-50 shadow-lg":"border-gray-200 hover:border-green-400 hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 mb-1 rounded-full flex items-center justify-center ${m===t.id?"bg-green-500":"bg-gray-100 group-hover:bg-green-100"}`,children:e.jsx(E,{size:16,className:`md:w-5 md:h-5 ${m===t.id?"text-white":"text-gray-600 group-hover:text-green-600"}`})}),e.jsx("h4",{className:"font-semibold text-gray-900 text-xs",children:t.name})]}),m===t.id&&e.jsx("div",{className:"absolute top-1 right-1 w-4 h-4 rounded-full bg-green-500 flex items-center justify-center",children:e.jsx(k,{size:10,className:"text-white"})})]},t.id))})]}),c&&m&&e.jsx("div",{className:"mt-3",children:!N||m!=="GAMEPAD"?e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-700 mb-1",children:"选择设备"}),e.jsx("div",{className:"grid grid-cols-3 gap-1.5 md:gap-2",children:se().map(t=>e.jsxs("button",{onClick:()=>t.status==="available"&&X(t.id),disabled:t.status==="in-use",className:`group relative bg-white rounded-lg p-1.5 md:p-2 border-2 transition-all duration-300 ${t.status==="in-use"?"border-gray-200 opacity-50 cursor-not-allowed":o===t.id?"border-purple-500 bg-purple-50 shadow-lg":"border-gray-200 hover:border-purple-400 hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 mb-1 rounded-full flex items-center justify-center ${t.status==="in-use"?"bg-gray-100":o===t.id?"bg-purple-500":"bg-gray-100 group-hover:bg-purple-100"}`,children:e.jsx(E,{size:16,className:`md:w-5 md:h-5 ${t.status==="in-use"?"text-gray-400":o===t.id?"text-white":"text-gray-600 group-hover:text-purple-600"}`})}),e.jsx("h4",{className:"font-semibold text-gray-900 text-xs",children:t.name}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${t.status==="in-use"?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:t.status==="in-use"?"使用中":"空闲"})]}),o===t.id&&e.jsx("div",{className:"absolute top-1 right-1 w-4 h-4 rounded-full bg-purple-500 flex items-center justify-center",children:e.jsx(k,{size:10,className:"text-white"})})]},t.id))})]}):e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-700 mb-2",children:"左臂手柄"}),e.jsx("div",{className:"grid grid-cols-3 gap-1.5 md:gap-2",children:se().map(t=>e.jsxs("button",{onClick:()=>t.status==="available"&&t.id!==h&&X(t.id),disabled:t.status==="in-use"||t.id===h,className:`group relative bg-white rounded-lg p-1.5 md:p-2 border-2 transition-all duration-300 ${t.status==="in-use"||t.id===h?"border-gray-200 opacity-50 cursor-not-allowed":o===t.id?"border-purple-500 bg-purple-50 shadow-lg":"border-gray-200 hover:border-purple-400 hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 mb-1 rounded-full flex items-center justify-center ${t.status==="in-use"||t.id===h?"bg-gray-100":o===t.id?"bg-purple-500":"bg-gray-100 group-hover:bg-purple-100"}`,children:e.jsx(E,{size:14,className:`${t.status==="in-use"||t.id===h?"text-gray-400":o===t.id?"text-white":"text-gray-600 group-hover:text-purple-600"}`})}),e.jsx("h4",{className:"font-semibold text-gray-900 text-xs",children:t.name}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${t.status==="in-use"||t.id===h?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:t.status==="in-use"?"使用中":t.id===h?"已选":"空闲"})]}),o===t.id&&e.jsx("div",{className:"absolute top-1 right-1 w-4 h-4 rounded-full bg-purple-500 flex items-center justify-center",children:e.jsx(k,{size:10,className:"text-white"})})]},t.id))})]}),e.jsxs("div",{className:"p-3 bg-indigo-50 border border-indigo-200 rounded-lg",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-700 mb-2",children:"右臂手柄"}),e.jsx("div",{className:"grid grid-cols-3 gap-1.5 md:gap-2",children:se().map(t=>e.jsxs("button",{onClick:()=>t.status==="available"&&t.id!==o&&oe(t.id),disabled:t.status==="in-use"||t.id===o,className:`group relative bg-white rounded-lg p-1.5 md:p-2 border-2 transition-all duration-300 ${t.status==="in-use"||t.id===o?"border-gray-200 opacity-50 cursor-not-allowed":h===t.id?"border-indigo-500 bg-indigo-50 shadow-lg":"border-gray-200 hover:border-indigo-400 hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 mb-1 rounded-full flex items-center justify-center ${t.status==="in-use"||t.id===o?"bg-gray-100":h===t.id?"bg-indigo-500":"bg-gray-100 group-hover:bg-indigo-100"}`,children:e.jsx(E,{size:14,className:`${t.status==="in-use"||t.id===o?"text-gray-400":h===t.id?"text-white":"text-gray-600 group-hover:text-indigo-600"}`})}),e.jsx("h4",{className:"font-semibold text-gray-900 text-xs",children:t.name}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${t.status==="in-use"||t.id===o?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:t.status==="in-use"?"使用中":t.id===o?"已选":"空闲"})]}),h===t.id&&e.jsx("div",{className:"absolute top-1 right-1 w-4 h-4 rounded-full bg-indigo-500 flex items-center justify-center",children:e.jsx(k,{size:10,className:"text-white"})})]},t.id))})]})]})})]})}),e.jsxs("div",{className:"flex items-center justify-center gap-3 mt-2 md:mt-3 flex-shrink-0",children:[e.jsx(g,{onClick:()=>{R(""),U(""),setGamepadCount(1)},className:"px-4 md:px-6 py-1.5 md:py-2 bg-white hover:bg-gray-50 text-gray-700 border-2 border-gray-300 rounded-lg font-medium text-sm",children:"重置"}),e.jsx(g,{onClick:()=>{n(!1),S(!0)},disabled:!ge(),className:`px-4 md:px-6 py-1.5 md:py-2 rounded-lg font-medium text-sm ${ge()?"bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-xl":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:"下一步"})]})]})}),A&&e.jsx(Ue,{onBack:()=>{S(!1),n(!0)},onProceed:t=>{K(t),q(!0),S(!1),p(!1)},clipInfo:{clipId:$e.id,arm1Device:o,arm1Controller:m,arm2Device:N&&m==="GAMEPAD"?h:o,arm2Controller:N?m:"",armMode:N?"double":"single"}}),!a&&!A&&e.jsxs(e.Fragment,{children:[B&&f&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col",onWheel:t=>{t.stopPropagation()},children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-900",children:[f.id," - Clips表"]}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-600",children:[e.jsx(F,{size:14,className:"text-blue-600"}),e.jsx("span",{children:f.device})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-600",children:[e.jsx(E,{size:14,className:"text-blue-600"}),e.jsx("span",{children:f.controller})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-600",children:[e.jsx(He,{size:14,className:"text-blue-600"}),e.jsxs("span",{children:[f.clipCount," 条Clips"]})]})]})]}),e.jsx("button",{onClick:()=>{le(!1),de(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(re,{size:20})})]}),e.jsx("div",{className:"overflow-y-scroll px-6 py-5",style:{scrollbarWidth:"thin",scrollbarColor:"#cbd5e1 #f1f5f9",maxHeight:"560px"},children:e.jsx("div",{className:"grid grid-cols-3 gap-4",children:Ae(f.id).map(t=>e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 cursor-pointer transition-all",onClick:()=>{H(t),ne(!0),G(!0)},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:t.id}),e.jsx("span",{className:"text-xs text-gray-500",children:t.duration})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-3 line-clamp-2",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-400",children:t.time}),e.jsx("span",{className:"text-xs text-gray-500",children:t.duration})]})]},t.id))})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["采集时间: ",f.date," ",f.time]}),e.jsx(g,{onClick:()=>{le(!1),de(null)},className:"px-4 py-2 bg-white hover:bg-gray-50 text-gray-700 border border-gray-300 rounded-md",children:"关闭"})]})]})}),fe&&y&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-900",children:[y.id," - 详细信息"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:y.description})]}),e.jsx("button",{onClick:()=>{G(!1),H(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(re,{size:20})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-5 bg-gray-50",children:e.jsx("div",{className:"relative mb-4",style:{height:"calc(75vh - 180px)"},children:e.jsxs("div",{className:"relative bg-black rounded-xl overflow-hidden shadow-lg w-full h-full",children:[e.jsx("img",{src:ue,alt:"Clip回放",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-black/50 backdrop-blur-md text-white px-3 py-1.5 rounded-lg text-sm font-medium",children:[e.jsx(T,{size:14}),e.jsx("span",{children:"主摄像头"})]}),e.jsx("div",{className:"bg-black/50 backdrop-blur-md text-white px-3 py-1.5 rounded-lg text-sm",children:y.duration})]})}),N?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`absolute transition-all duration-300 bg-black rounded-lg overflow-hidden shadow-xl cursor-pointer border-2 border-white/20 hover:border-white/40 ${i==="both"?"bottom-4 right-[calc(33.33%+2rem)]":"bottom-4 right-4"}`,style:{width:i==="left"||i==="both"?"33.33%":"16.67%",aspectRatio:"4/3",...i===null&&{transform:"translateY(calc(-100% - 0.5rem))"},...i==="right"&&{transform:"translateY(calc(-200% - 1rem))"}},onClick:()=>Y("left"),children:[e.jsx("img",{src:D,alt:"左臂视角",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-2",children:e.jsx("div",{className:"text-white text-xs font-medium",children:"左臂视角"})}),e.jsx("div",{className:"absolute top-2 right-2 bg-black/50 backdrop-blur-md text-white p-1 rounded",children:e.jsx(w,{size:12})})]}),e.jsxs("div",{className:"absolute transition-all duration-300 bg-black rounded-lg overflow-hidden shadow-xl cursor-pointer border-2 border-white/20 hover:border-white/40 bottom-4 right-4",style:{width:i==="right"||i==="both"?"33.33%":"16.67%",aspectRatio:"4/3",...i==="left"&&{transform:"translateY(calc(-200% - 1rem))"}},onClick:()=>Y("right"),children:[e.jsx("img",{src:D,alt:"右臂视角",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-2",children:e.jsx("div",{className:"text-white text-xs font-medium",children:"右臂视角"})}),e.jsx("div",{className:"absolute top-2 right-2 bg-black/50 backdrop-blur-md text-white p-1 rounded",children:e.jsx(w,{size:12})})]})]}):e.jsxs("div",{className:"absolute transition-all duration-300 bg-black rounded-lg overflow-hidden shadow-xl cursor-pointer border-2 border-white/20 hover:border-white/40 bottom-4 right-4",style:{width:i==="hand"?"33.33%":"16.67%",aspectRatio:"4/3"},onClick:()=>z(i==="hand"?null:"hand"),children:[e.jsx("img",{src:D,alt:"右臂视角",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-2",children:e.jsx("div",{className:"text-white text-xs font-medium",children:"手部摄像头"})}),e.jsx("div",{className:"absolute top-2 right-2 bg-black/50 backdrop-blur-md text-white p-1 rounded",children:e.jsx(w,{size:12})})]})]})})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsxs(g,{onClick:()=>{console.log("播放Clip:",y.id)},className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md font-medium flex items-center gap-2",children:[e.jsx(T,{size:16}),"播放"]}),e.jsxs("div",{className:"flex-1 max-w-md flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1 bg-gray-200 rounded-full h-1.5 relative",style:{overflow:"visible"},children:[e.jsx("div",{className:"bg-blue-600 h-full transition-all duration-300 rounded-full",style:{width:`${1024/1608*100}%`}}),e.jsx("button",{onClick:t=>{t.stopPropagation(),t.preventDefault(),console.log("跳转到关键帧: 804")},className:"absolute -top-3 left-1/2 -translate-x-1/2 hover:scale-110 transition-transform cursor-pointer z-10",style:{pointerEvents:"auto"},title:"关键帧 (804帧)",children:e.jsxs("div",{className:"flex flex-col items-center pointer-events-none",children:[e.jsx("div",{className:"w-0 h-0 border-l-[7px] border-r-[7px] border-t-[10px] border-l-transparent border-r-transparent border-t-orange-500 drop-shadow-lg"}),e.jsx("div",{className:"w-1.5 h-2.5 bg-gradient-to-b from-orange-500 to-orange-600 -mt-0.5 drop-shadow-lg rounded-b-sm"})]})})]}),e.jsx("span",{className:"text-xs text-gray-600 font-medium min-w-[80px]",children:"1024 / 1608 帧"}),e.jsxs("select",{value:ye,onChange:t=>ve(Number(t.target.value)),className:"text-xs border border-gray-300 rounded px-2 py-1 bg-white hover:border-blue-400 focus:outline-none focus:border-blue-500 cursor-pointer",children:[e.jsx("option",{value:.25,children:"0.25x"}),e.jsx("option",{value:.5,children:"0.5x"}),e.jsx("option",{value:1,children:"1x"}),e.jsx("option",{value:2,children:"2x"}),e.jsx("option",{value:4,children:"4x"}),e.jsx("option",{value:8,children:"8x"})]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["录制于 ",y.time]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(g,{onClick:()=>{G(!1),H(null),ne(!1)},className:"px-4 py-2 bg-white hover:bg-gray-50 text-gray-700 border border-gray-300 rounded-md",children:"返回"}),!je&&e.jsx(g,{onClick:()=>{console.log("删除Clip:",y.id),G(!1),H(null)},className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md font-medium",children:"删除此Clip"})]})]})]})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"flex-shrink-0 px-6 py-4 border-b border-gray-200 bg-white",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(g,{onClick:()=>{R(""),U(""),be(""),pe(""),p(!0),j("idle"),q(!1),K("")},className:"flex items-center gap-2 px-4 py-2.5 bg-gray-600 hover:bg-gray-700 text-white font-medium rounded-lg transition-all",children:[e.jsx(re,{size:18}),e.jsx("span",{children:"返回选择设备"})]})})})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50",children:e.jsxs("div",{className:"h-full flex gap-4",children:[e.jsx("div",{className:"relative flex-[3] camera-container",style:{height:"calc(100vh - 200px)"},children:e.jsxs("div",{className:"relative bg-black rounded-xl overflow-hidden shadow-lg w-full h-full",children:[e.jsx("img",{src:ue,alt:"主摄像头",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center gap-2 bg-black/50 backdrop-blur-md text-white px-3 py-1.5 rounded-lg text-sm font-medium",children:e.jsx("span",{children:"主摄像头"})}),e.jsx("div",{className:"bg-black/50 backdrop-blur-md text-white px-3 py-1.5 rounded-lg text-sm",children:e.jsx("span",{children:"1080p 30fps"})})]})}),e.jsxs("div",{className:"absolute top-3 right-3 flex gap-2",children:[e.jsx("button",{className:"bg-black/50 backdrop-blur-md hover:bg-black/70 text-white p-2 rounded-lg transition-all",children:e.jsx(Le,{size:18})}),e.jsx("button",{className:"bg-black/50 backdrop-blur-md hover:bg-black/70 text-white p-2 rounded-lg transition-all",children:e.jsx(w,{size:18})})]}),N?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`pip-container bg-black rounded-lg overflow-hidden shadow-xl border-2 border-white/20 hover:border-white/40 ${b==="left"?"cursor-grabbing":"cursor-grab"} ${r.left.x===0&&r.left.y===0?"absolute "+(i==="both"&&r.right.x===0&&r.right.y===0?"bottom-4 left-4":"bottom-4 right-4"):"fixed"}`,style:{width:x.left.width>0?`${x.left.width}px`:i==="left"||i==="both"?"33.33%":"16.67%",height:x.left.height>0?`${x.left.height}px`:void 0,aspectRatio:x.left.height>0?void 0:"4/3",...r.left.x!==0||r.left.y!==0?{left:`${r.left.x}px`,top:`${r.left.y}px`,zIndex:1e3}:{...i===null&&r.right.x===0&&r.right.y===0&&{transform:"translateY(calc(-100% - 0.5rem))"},...i==="right"&&r.right.x===0&&r.right.y===0&&{transform:"translateY(calc(-200% - 1rem))"}},transition:b==="left"||v==="left"?"none":"all 300ms"},onMouseDown:t=>Z(t,"left"),onClick:()=>Y("left"),children:[e.jsx("img",{src:D,alt:"左臂视角",className:"w-full h-full object-cover pointer-events-none"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-2 pointer-events-none",children:e.jsxs("div",{className:"text-white text-xs font-medium flex items-center gap-1",children:[e.jsx(ae,{size:12}),"左臂视角"]})}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-1",children:[e.jsx("button",{className:"bg-black/50 backdrop-blur-md text-white p-1 rounded hover:bg-black/70 transition-colors",onClick:t=>Q("left",t),title:"重置位置",children:e.jsx(ie,{size:12})}),e.jsx("div",{className:"bg-black/50 backdrop-blur-md text-white p-1 rounded pointer-events-none",children:e.jsx(w,{size:12})})]}),e.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-nwse-resize",style:{background:"linear-gradient(135deg, transparent 0%, transparent 50%, rgba(255,255,255,0.5) 50%, rgba(255,255,255,0.5) 100%)"},onMouseDown:t=>I(t,"left")})]}),e.jsxs("div",{className:`pip-container bg-black rounded-lg overflow-hidden shadow-xl border-2 border-white/20 hover:border-white/40 ${b==="right"?"cursor-grabbing":"cursor-grab"} ${r.right.x===0&&r.right.y===0?"absolute bottom-4 right-4":"fixed"}`,style:{width:x.right.width>0?`${x.right.width}px`:i==="right"||i==="both"?"33.33%":"16.67%",height:x.right.height>0?`${x.right.height}px`:void 0,aspectRatio:x.right.height>0?void 0:"4/3",...r.right.x!==0||r.right.y!==0?{left:`${r.right.x}px`,top:`${r.right.y}px`,zIndex:1e3}:{...i==="left"&&r.left.x===0&&r.left.y===0&&{transform:"translateY(calc(-200% - 1rem))"}},transition:b==="right"||v==="right"?"none":"all 300ms"},onMouseDown:t=>Z(t,"right"),onClick:()=>Y("right"),children:[e.jsx("img",{src:D,alt:"右臂视角",className:"w-full h-full object-cover pointer-events-none"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-2 pointer-events-none",children:e.jsxs("div",{className:"text-white text-xs font-medium flex items-center gap-1",children:[e.jsx(ae,{size:12}),"右臂视角"]})}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-1",children:[e.jsx("button",{className:"bg-black/50 backdrop-blur-md text-white p-1 rounded hover:bg-black/70 transition-colors",onClick:t=>Q("right",t),title:"重置位置",children:e.jsx(ie,{size:12})}),e.jsx("div",{className:"bg-black/50 backdrop-blur-md text-white p-1 rounded pointer-events-none",children:e.jsx(w,{size:12})})]}),e.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-nwse-resize",style:{background:"linear-gradient(135deg, transparent 0%, transparent 50%, rgba(255,255,255,0.5) 50%, rgba(255,255,255,0.5) 100%)"},onMouseDown:t=>I(t,"right")})]})]}):e.jsxs("div",{className:`pip-container bg-black rounded-lg overflow-hidden shadow-xl border-2 border-white/20 hover:border-white/40 ${b==="hand"?"cursor-grabbing":"cursor-grab"} ${r.hand.x===0&&r.hand.y===0?"absolute bottom-4 right-4":"fixed"}`,style:{width:x.hand.width>0?`${x.hand.width}px`:i==="hand"?"33.33%":"16.67%",height:x.hand.height>0?`${x.hand.height}px`:void 0,aspectRatio:x.hand.height>0?void 0:"4/3",...r.hand.x!==0||r.hand.y!==0?{left:`${r.hand.x}px`,top:`${r.hand.y}px`,zIndex:1e3}:{},transition:b==="hand"||v==="hand"?"none":"all 300ms"},onMouseDown:t=>Z(t,"hand"),onClick:()=>{if(me||he){V(!1),W(!1);return}O(t=>({...t,hand:{x:0,y:0}})),M(t=>({...t,hand:{width:0,height:0}})),z(i==="hand"?null:"hand")},children:[e.jsx("img",{src:D,alt:"手部姿态",className:"w-full h-full object-cover pointer-events-none"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-2 pointer-events-none",children:e.jsxs("div",{className:"text-white text-xs font-medium flex items-center gap-1",children:[e.jsx(ae,{size:12}),"手部摄像头"]})}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-1",children:[e.jsx("button",{className:"bg-black/50 backdrop-blur-md text-white p-1 rounded hover:bg-black/70 transition-colors",onClick:t=>Q("hand",t),title:"重置位置",children:e.jsx(ie,{size:12})}),e.jsx("div",{className:"bg-black/50 backdrop-blur-md text-white p-1 rounded pointer-events-none",children:e.jsx(w,{size:12})})]}),e.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-nwse-resize",style:{background:"linear-gradient(135deg, transparent 0%, transparent 50%, rgba(255,255,255,0.5) 50%, rgba(255,255,255,0.5) 100%)"},onMouseDown:t=>I(t,"hand")})]})]})}),e.jsxs("div",{className:"flex-[2] flex flex-col",style:{height:"calc(100vh - 200px)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs(g,{onClick:()=>{console.log("一键复位触发")},className:"flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-800 text-white font-medium rounded-lg transition-all",children:[e.jsx(Oe,{size:18}),e.jsx("span",{children:"一键复位"})]}),e.jsxs(g,{onClick:()=>{console.log("急停触发")},className:"flex items-center gap-2 px-5 py-2.5 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg shadow-md transition-all hover:shadow-lg",children:[e.jsx(Fe,{size:20}),e.jsx("span",{children:"一键急停"})]})]}),e.jsx("div",{className:"flex-1 bg-white rounded-xl border-2 border-gray-200 shadow-lg flex flex-col items-center justify-center p-8",children:$==="idle"?e.jsx("button",{onClick:()=>j("recording"),className:"w-64 h-64 rounded-full bg-blue-600 hover:bg-blue-700 text-white shadow-md hover:shadow-lg transition-all flex items-center justify-center group",children:e.jsxs("div",{className:"text-center",children:[e.jsx(T,{size:48,className:"mx-auto mb-3 group-hover:scale-105 transition-transform"}),e.jsx("div",{className:"text-xl font-medium",children:"准备开始录制"})]})}):e.jsxs("button",{onClick:()=>j("idle"),className:"w-64 h-64 rounded-full bg-blue-600 hover:bg-blue-700 text-white shadow-md hover:shadow-lg transition-all flex items-center justify-center group relative",children:[e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-5xl font-mono font-bold tracking-wider",children:Ce(ee)}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 translate-y-[2rem] text-xl font-medium text-white/80",children:"停止录制"})]})}),e.jsxs("div",{className:"mt-4 flex items-center justify-between gap-4",children:[e.jsxs(g,{onClick:()=>{j("idle"),te(0)},className:"flex items-center gap-2 px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white font-medium rounded-lg transition-all",children:[e.jsx(_e,{size:20}),e.jsx("span",{children:"丢弃重采"})]}),e.jsxs(g,{onClick:()=>{console.log("完成采集，录制时长：",ee),j("idle"),te(0),K(""),q(!1),S(!0),p(!1)},className:"flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-md transition-all hover:shadow-lg",disabled:ee===0,children:[e.jsx(k,{size:20}),e.jsx("span",{children:"完成采集"})]})]})]})]})})]})]})]})}export{tt as default};
