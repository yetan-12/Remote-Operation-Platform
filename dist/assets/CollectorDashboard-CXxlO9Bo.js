var _e=Object.defineProperty;var Ve=(m,s,i)=>s in m?_e(m,s,{enumerable:!0,configurable:!0,writable:!0,value:i}):m[s]=i;var ne=(m,s,i)=>Ve(m,typeof s!="symbol"?s+"":s,i);import{c as me,r,j as e,B as h,u as qe,E as Be}from"./index-C4ijDJHY.js";import{C as Fe,r as we,h as $}from"./placeholders-DmpdoT2B.js";import{P as F,C as B}from"./play-chIzS5U0.js";import{G as A,X as oe,T as We}from"./x-BYLQLYzy.js";import{C as Xe,M as k,a as ce,H as xe,R as Ue}from"./rotate-ccw-DCr_HQT8.js";/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Je=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],D=me("check",Je);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ke=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],S=me("circle",Ke);/**
 * @license lucide-react v0.487.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qe=[["path",{d:"M12 16h.01",key:"1drbdi"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M15.312 2a2 2 0 0 1 1.414.586l4.688 4.688A2 2 0 0 1 22 8.688v6.624a2 2 0 0 1-.586 1.414l-4.688 4.688a2 2 0 0 1-1.414.586H8.688a2 2 0 0 1-1.414-.586l-4.688-4.688A2 2 0 0 1 2 15.312V8.688a2 2 0 0 1 .586-1.414l4.688-4.688A2 2 0 0 1 8.688 2z",key:"1fd625"}]],Ze=me("octagon-alert",Qe);function Ie({onBack:m,onProceed:s,clipInfo:i}){const[j,y]=r.useState(""),[o,P]=r.useState(!1),W=()=>{o&&j.trim()&&s(j)};return e.jsx("div",{className:"flex-1 flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 p-2 md:p-4 overflow-hidden",children:e.jsxs("div",{className:"max-w-3xl w-full h-full max-h-screen flex flex-col py-2",children:[e.jsxs("button",{onClick:m,className:"mb-2 flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors flex-shrink-0",children:[e.jsx(Fe,{size:20}),e.jsx("span",{className:"text-sm",children:"返回设备选择"})]}),e.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 shadow-sm overflow-hidden flex-1 flex flex-col min-h-0",children:[e.jsxs("div",{className:"border-b border-gray-200 p-3 md:p-6 bg-gray-50 flex-shrink-0",children:[e.jsx("h2",{className:"text-base md:text-lg font-semibold text-gray-900 mb-1",children:"Clip 设置"}),e.jsx("p",{className:"text-xs md:text-sm text-gray-500",children:"请输入任务提示并准备开始录制"})]}),e.jsxs("div",{className:"flex-1 overflow-y-auto",children:[e.jsxs("div",{className:"p-3 md:p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-xs md:text-sm font-medium text-gray-900 mb-3 md:mb-4",children:"当前 Clip"}),e.jsx("div",{className:"bg-gray-50 rounded-lg border border-gray-200 p-3 md:p-4",children:i.armMode==="single"?e.jsxs("div",{className:"grid grid-cols-3 gap-2 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Clip ID"}),e.jsx("div",{className:"text-xs md:text-sm font-medium text-gray-900",children:i.clipId})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"机械臂"}),e.jsx("div",{className:"text-xs md:text-sm font-medium text-gray-900",children:i.arm1Device})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"操作器"}),e.jsx("div",{className:"text-xs md:text-sm font-medium text-gray-900",children:i.arm1Controller})]})]}):e.jsxs("div",{className:"space-y-2 md:space-y-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Clip ID"}),e.jsx("div",{className:"text-xs md:text-sm font-medium text-gray-900",children:i.clipId})]}),i.armMode==="single"?e.jsxs("div",{className:"grid grid-cols-2 gap-2 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"设备"}),e.jsx("div",{className:"text-xs md:text-sm font-medium text-gray-900",children:i.arm1Device})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"控制器"}),e.jsx("div",{className:"text-xs md:text-sm font-medium text-gray-900",children:i.arm1Controller})]})]}):i.arm1Controller==="GAMEPAD"?e.jsx(e.Fragment,{children:e.jsxs("div",{className:"grid grid-cols-2 gap-2 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"左臂手柄"}),e.jsx("div",{className:"text-xs md:text-sm font-medium text-gray-900",children:i.arm1Device})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"右臂手柄"}),e.jsx("div",{className:"text-xs md:text-sm font-medium text-gray-900",children:i.arm2Device})]})]})}):e.jsxs("div",{className:"grid grid-cols-2 gap-2 md:gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"设备"}),e.jsx("div",{className:"text-xs md:text-sm font-medium text-gray-900",children:i.arm1Device})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"控器"}),e.jsx("div",{className:"text-xs md:text-sm font-medium text-gray-900",children:i.arm1Controller})]})]})]})})]}),e.jsxs("div",{className:"p-3 md:p-6 border-b border-gray-200",children:[e.jsx("h3",{className:"text-xs md:text-sm font-medium text-gray-900 mb-2 md:mb-3",children:"任务提示 (Prompt)"}),e.jsx("textarea",{value:j,onChange:N=>y(N.target.value),placeholder:'请输入当前Clip的任务提示，例如："将机器人由初始位置移动至摆放台上"',className:"w-full h-24 md:h-32 px-3 md:px-4 py-2 md:py-3 text-xs md:text-sm text-gray-700 bg-gray-50 border border-gray-300 rounded-lg resize-none focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"}),e.jsxs("div",{className:"mt-3",children:[e.jsx("p",{className:"text-xs text-gray-500 mb-2",children:"快速模板："}),e.jsx("div",{className:"flex flex-wrap gap-2",children:["将物体从A点移动到B点","抓取桌面上的物体并放置��指位置","执行物体分拣任务","完成精密组装操作","拾取并堆叠多个物体","执行物体翻转操作"].map((N,R)=>e.jsx("button",{onClick:()=>y(N),className:"px-3 py-1.5 text-xs bg-white border border-gray-300 rounded-lg hover:bg-blue-50 hover:border-blue-400 hover:text-blue-600 transition-colors",children:N},R))})]})]})]}),e.jsxs("div",{className:"p-3 md:p-6 bg-gray-50 flex-shrink-0 border-t border-gray-200",children:[e.jsx("h3",{className:"text-xs md:text-sm font-medium text-gray-900 mb-2 md:mb-3",children:"设备状态"}),i.armMode==="single"?e.jsxs("div",{className:"mb-3 md:mb-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{size:8,className:o?"text-green-500 fill-green-500":"text-gray-400 fill-gray-400"}),e.jsxs("span",{className:"text-xs md:text-sm text-gray-700",children:["控制方式：",i.arm1Controller]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{size:8,className:o?"text-green-500 fill-green-500":"text-gray-400 fill-gray-400"}),e.jsxs("span",{className:"text-xs md:text-sm text-gray-700",children:["当前设备：",i.arm1Device]}),e.jsx("span",{className:"text-xs text-gray-500 ml-auto",children:o?"已准备就绪":"等待准备"})]})]}):i.arm1Controller==="GAMEPAD"?e.jsxs("div",{className:"mb-3 md:mb-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{size:8,className:o?"text-green-500 fill-green-500":"text-gray-400 fill-gray-400"}),e.jsxs("span",{className:"text-xs md:text-sm text-gray-700",children:["控制方式：",i.arm1Controller]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{size:8,className:o?"text-green-500 fill-green-500":"text-gray-400 fill-gray-400"}),e.jsxs("span",{className:"text-xs md:text-sm text-gray-700",children:["左臂设备：",i.arm1Device]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{size:8,className:o?"text-green-500 fill-green-500":"text-gray-400 fill-gray-400"}),e.jsxs("span",{className:"text-xs md:text-sm text-gray-700",children:["右臂设备：",i.arm2Device]}),e.jsx("span",{className:"text-xs text-gray-500 ml-auto",children:o?"已准备就绪":"等待准备"})]})]}):e.jsxs("div",{className:"mb-3 md:mb-4 space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{size:8,className:o?"text-green-500 fill-green-500":"text-gray-400 fill-gray-400"}),e.jsxs("span",{className:"text-xs md:text-sm text-gray-700",children:["控制方式：",i.arm1Controller]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(S,{size:8,className:o?"text-green-500 fill-green-500":"text-gray-400 fill-gray-400"}),e.jsxs("span",{className:"text-xs md:text-sm text-gray-700",children:["当前设备：",i.arm1Device]}),e.jsx("span",{className:"text-xs text-gray-500 ml-auto",children:o?"已准备就绪":"等待准备"})]})]}),e.jsxs("div",{className:"flex gap-2 md:gap-3",children:[e.jsxs(h,{onClick:()=>P(!o),className:`flex-1 h-9 md:h-10 flex items-center justify-center gap-1.5 md:gap-2 ${o?"bg-white text-gray-700 border border-gray-300 hover:bg-gray-50":j.trim()?"bg-blue-600 text-white hover:bg-blue-700":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,disabled:!j.trim(),children:[e.jsx(D,{size:14,className:"md:w-4 md:h-4"}),e.jsx("span",{className:"text-xs md:text-sm font-medium",children:o?"取消连接":"准备连接设备"})]}),e.jsxs(h,{onClick:W,className:"flex-1 bg-green-600 hover:bg-green-700 text-white h-9 md:h-10 flex items-center justify-center gap-1.5 md:gap-2",disabled:!o,children:[e.jsx(F,{size:14,fill:"white",className:"md:w-4 md:h-4"}),e.jsx("span",{className:"text-xs md:text-sm font-medium",children:"开始录制"})]})]})]})]}),e.jsx("div",{className:"mt-2 px-3 md:px-4 py-2 md:py-3 bg-gray-50 border border-gray-300 rounded-lg flex-shrink-0",children:e.jsx("p",{className:"text-xs text-gray-600",children:'点击"准备"后，请确保设备就位，然后点击"开始录制"进入采集界面'})})]})})}const et={GAMEPAD:"手柄",GELLOW:"GELLO",VR:"VR"};class tt{constructor(){ne(this,"requiresDualDeviceSelection",!1)}validateSelection(s){return!!(s.arm1Robot&&s.arm1Controller&&s.arm1Device)}buildSessionPayload(s){return{arm1Device:s.arm1Device,arm2Device:s.arm1Device,arm1Controller:s.arm1Controller,arm2Controller:"",armMode:"single"}}getControllerDisplayName(s){return et[s]??s}}const st={GAMEPAD:"手柄",GELLOW:"GELLO",VR:"VR"};class rt{constructor(s){ne(this,"requiresDualDeviceSelection");this.requiresDualDeviceSelection=s==="GAMEPAD"}validateSelection(s){return!(!s.arm1Robot||!s.arm1Controller||!s.arm1Device||this.requiresDualDeviceSelection&&!s.arm2Device)}buildSessionPayload(s){const i=this.requiresDualDeviceSelection;return{arm1Device:s.arm1Device,arm2Device:i?s.arm2Device:s.arm1Device,arm1Controller:s.arm1Controller,arm2Controller:s.arm1Controller,armMode:"double"}}getControllerDisplayName(s){return st[s]??s}}function it(m,s){return m?new rt(s):new tt}function pt(){const{getRobotDevices:m,getControllerSubTypes:s,getControllerDevices:i}=qe(),[j,y]=r.useState("idle"),[o,P]=r.useState(!0),[W,N]=r.useState(!0),[R,L]=r.useState(!1),[p,X]=r.useState(""),[b,U]=r.useState(""),[at,Ce]=r.useState(""),[lt,ke]=r.useState(""),[Se,T]=r.useState(!1),[w,G]=r.useState(null),[J,he]=r.useState(!1),[v,ge]=r.useState(null),[De,ue]=r.useState(!1),[c,O]=r.useState(""),[g,K]=r.useState(""),[dt,Q]=r.useState(""),[nt,Z]=r.useState(!1),[ze,$e]=r.useState(1),[l,z]=r.useState(null),[a,H]=r.useState({left:{x:0,y:0},right:{x:0,y:0},hand:{x:0,y:0}}),[x,M]=r.useState({left:{width:0,height:0},right:{width:0,height:0},hand:{width:0,height:0}}),[f,pe]=r.useState(null),[I,Pe]=r.useState({x:0,y:0}),[C,be]=r.useState(null),[E,Re]=r.useState({x:0,y:0,width:0,height:0}),[fe,Y]=r.useState(!1),[je,_]=r.useState(!1),V=t=>{if(fe||je){Y(!1),_(!1);return}H(n=>({...n,[t]:{x:0,y:0}})),M(n=>({...n,[t]:{width:0,height:0}})),z(l===null?t:l===t?null:l==="both"?t==="left"?"right":"left":"both")},ee=(t,n)=>{n.stopPropagation(),H(d=>({...d,[t]:{x:0,y:0}})),M(d=>({...d,[t]:{width:0,height:0}}))},te=(t,n)=>{if(t.target.closest("button"))return;t.preventDefault(),t.stopPropagation(),Y(!1),pe(n);const d=t.currentTarget.getBoundingClientRect();Pe({x:t.clientX-d.left,y:t.clientY-d.top}),M(u=>({...u,[n]:{width:d.width,height:d.height}}))},se=(t,n)=>{var u;t.preventDefault(),t.stopPropagation(),_(!1),be(n);const d=(u=t.currentTarget.closest(".pip-container"))==null?void 0:u.getBoundingClientRect();d&&Re({x:t.clientX,y:t.clientY,width:d.width,height:d.height})};r.useEffect(()=>{const t=d=>{if(f&&(Y(!0),H(u=>({...u,[f]:{x:d.clientX-I.x,y:d.clientY-I.y}}))),C){_(!0);const u=d.clientX-E.x,Ge=d.clientY-E.y,Oe=Math.max(150,E.width+u),He=Math.max(100,E.height+Ge);M(Ye=>({...Ye,[C]:{width:Oe,height:He}}))}},n=()=>{pe(null),be(null)};if(f||C)return document.addEventListener("mousemove",t),document.addEventListener("mouseup",n),()=>{document.removeEventListener("mousemove",t),document.removeEventListener("mouseup",n)}},[f,C,I,E]);const[re,ie]=r.useState(0);r.useEffect(()=>{let t=null;return j==="recording"&&(t=setInterval(()=>{ie(n=>n+1)},1e3)),()=>{t&&clearInterval(t)}},[j]);const Me=t=>{const n=Math.floor(t/3600),d=Math.floor(t%3600/60),u=t%60;return`${n.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}:${u.toString().padStart(2,"0")}`},ye=m().map(t=>({id:t.id,name:t.name,status:t.status,isDual:t.subType==="dual"})),Ee=s().map(t=>({id:t,name:t==="GAMEPAD"?"手柄":t==="GELLOW"?"GELLO":t})),ae=ye.find(t=>t.id===p),q=(ae==null?void 0:ae.isDual)??!1,le=r.useMemo(()=>it(q,b),[q,b]),de=()=>b?i(b):[],ve={arm1Robot:p,arm1Controller:b,arm1Device:c,arm2Device:g},Ne=()=>le.validateSelection(ve),Ae=[{id:"C1225-09",description:"将机械臂移到至指定的置0度",time:"14:32",duration:"00:42",frames:1608},{id:"C1225-07",description:"将夹住方形积木移至色盘上方",time:"14:28",duration:"00:35",frames:21},{id:"C1225-06",description:"夹取摆放干磁吸组件并扫描片",time:"14:21",duration:"00:51",frames:30},{id:"C1225-05",description:"机械臂回到初始位置",time:"14:15",duration:"00:28",frames:17},{id:"C1225-04",description:"抓取蓝色方块放置到指定位置",time:"14:10",duration:"00:45",frames:27},{id:"C1225-03",description:"检测并校准机械臂位置",time:"14:05",duration:"00:38",frames:23},{id:"C1225-02",description:"打开夹爪并准备抓取",time:"14:00",duration:"00:32",frames:19},{id:"C1225-01",description:"机械臂初始化测试",time:"13:55",duration:"00:25",frames:15}],Le={id:(()=>{const t=new Date,n=String(t.getMonth()+1).padStart(2,"0"),d=String(t.getDate()).padStart(2,"0"),u=String(Ae.length+1).padStart(2,"0");return`C${n}${d}-${u}`})(),time:new Date().toLocaleTimeString("zh-CN",{hour:"2-digit",minute:"2-digit"})},Te=t=>t==="SE-20251217-002"?[{id:"Clip-012",description:"复位机��臂到初始位置",time:"16:20",duration:"00:38",frames:23},{id:"Clip-011",description:"拾取红色立方并放置",time:"16:15",duration:"00:52",frames:31},{id:"Clip-010",description:"调整夹爪角度进行抓取",time:"16:10",duration:"00:41",frames:25},{id:"Clip-009",description:"移动到指定工作区域",time:"16:05",duration:"00:35",frames:21},{id:"Clip-008",description:"扫描工作台上的物",time:"16:00",duration:"00:48",frames:29},{id:"Clip-007",description:"精确定位目标位置",time:"15:55",duration:"00:33",frames:20},{id:"Clip-006",description:"缓慢接近抓取目标",time:"15:50",duration:"00:44",frames:26},{id:"Clip-005",description:"张开夹爪准备抓取",time:"15:45",duration:"00:29",frames:17},{id:"Clip-004",description:"检夹爪状态",time:"15:40",duration:"00:36",frames:22},{id:"Clip-003",description:"移动到观察点",time:"15:35",duration:"00:42",frames:25},{id:"Clip-002",description:"校准机械臂姿态",time:"15:30",duration:"00:39",frames:23},{id:"Clip-001",description:"机械臂系统初始化",time:"15:25",duration:"00:31",frames:19}]:t==="SE-20251216-001"?[{id:"Clip-023",description:"完成整个工作流程",time:"15:45",duration:"00:55",frames:33},{id:"Clip-022",description:"将工具放回工具架",time:"15:40",duration:"00:47",frames:28},{id:"Clip-021",description:"组装最后一个部件",time:"15:35",duration:"00:51",frames:31},{id:"Clip-020",description:"精确对齐组件",time:"15:30",duration:"00:43",frames:26},{id:"Clip-019",description:"拾取第三个部件",time:"15:25",duration:"00:39",frames:23},{id:"Clip-018",description:"放置第二个组件",time:"15:20",duration:"00:46",frames:28},{id:"Clip-017",description:"调整组件方向",time:"15:15",duration:"00:42",frames:25},{id:"Clip-016",description:"抓取第二个部件",time:"15:10",duration:"00:38",frames:23},{id:"Clip-015",description:"放置第一个组件到位",time:"15:05",duration:"00:44",frames:26},{id:"Clip-014",description:"移动到装配位置",time:"15:00",duration:"00:40",frames:24},{id:"Clip-013",description:"检查组完整性",time:"14:55",duration:"00:36",frames:22},{id:"Clip-012",description:"拾取第一个组件",time:"14:50",duration:"00:48",frames:29},{id:"Clip-011",description:"扫描���有工作部件",time:"14:45",duration:"00:52",frames:31},{id:"Clip-010",description:"调整工作台高度",time:"14:40",duration:"00:35",frames:21},{id:"Clip-009",description:"移动到工作起始点",time:"14:35",duration:"00:41",frames:25},{id:"Clip-008",description:"测试夹爪力度",time:"14:30",duration:"00:33",frames:20},{id:"Clip-007",description:"校准传感器读数",time:"14:25",duration:"00:38",frames:23},{id:"Clip-006",description:"检测环境光照",time:"14:20",duration:"00:29",frames:17},{id:"Clip-005",description:"设置工作区边界",time:"14:15",duration:"00:45",frames:27},{id:"Clip-004",description:"测试关节活动范围",time:"14:10",duration:"00:42",frames:25},{id:"Clip-003",description:"校准各轴位置",time:"14:05",duration:"00:37",frames:22},{id:"Clip-002",description:"运行统自检",time:"14:00",duration:"00:40",frames:24},{id:"Clip-001",description:"机械臂上电初始化",time:"13:55",duration:"00:34",frames:20}]:[];return r.useEffect(()=>(J?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[J]),e.jsxs("div",{className:"flex-1 flex overflow-hidden",children:[o&&W&&!R&&e.jsx("div",{className:"flex-1 bg-gradient-to-br from-blue-50 to-indigo-100 overflow-hidden p-4 flex items-center justify-center",children:e.jsxs("div",{className:"max-w-6xl w-full mx-auto h-full flex flex-col justify-center py-2",children:[e.jsxs("div",{className:"text-center mb-2 md:mb-3 flex-shrink-0",children:[e.jsx("h1",{className:"text-base md:text-lg font-bold text-gray-900 mb-1",children:"设备配置"}),e.jsx("p",{className:"text-xs text-gray-600",children:"请选择机械臂和控制器"})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-1 min-h-0",children:e.jsxs("div",{className:"mb-3 md:mb-4",children:[e.jsx("h2",{className:"text-xs md:text-sm font-semibold text-gray-900 mb-1.5",children:"机械臂选择"}),e.jsxs("div",{className:"mb-2 md:mb-3",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-700 mb-1",children:"选择机械臂类型"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-5 gap-1.5 md:gap-2",children:ye.map(t=>e.jsxs("button",{onClick:()=>t.status==="available"&&X(t.id),disabled:t.status==="in-use",className:`group relative bg-white rounded-lg p-1.5 md:p-2 border-2 transition-all duration-300 ${t.status==="in-use"?"border-gray-200 opacity-50 cursor-not-allowed":p===t.id?"border-blue-500 bg-blue-50 shadow-lg":"border-gray-200 hover:border-blue-400 hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 mb-1 rounded-full flex items-center justify-center ${t.status==="in-use"?"bg-gray-100":p===t.id?"bg-blue-500":"bg-gray-100 group-hover:bg-blue-100"}`,children:t.isDual?e.jsxs("div",{className:"flex items-center gap-0.5",children:[e.jsx(B,{size:12,className:`${t.status==="in-use"?"text-gray-400":p===t.id?"text-white":"text-gray-600 group-hover:text-blue-600"}`}),e.jsx(B,{size:12,className:`${t.status==="in-use"?"text-gray-400":p===t.id?"text-white":"text-gray-600 group-hover:text-blue-600"}`})]}):e.jsx(B,{size:16,className:`md:w-5 md:h-5 ${t.status==="in-use"?"text-gray-400":p===t.id?"text-white":"text-gray-600 group-hover:text-blue-600"}`})}),e.jsx("h4",{className:"font-semibold text-gray-900 mb-0.5 text-xs",children:t.name}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${t.status==="in-use"?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:t.status==="in-use"?"使用中":"空闲"})]}),p===t.id&&e.jsx("div",{className:"absolute top-1 right-1 w-4 h-4 rounded-full bg-blue-500 flex items-center justify-center",children:e.jsx(D,{size:10,className:"text-white"})})]},t.id))})]}),p&&e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-700 mb-1",children:"选择控制方式"}),e.jsx("div",{className:"grid grid-cols-3 gap-1.5 md:gap-2",children:Ee.map(t=>e.jsxs("button",{onClick:()=>{U(t.id),O(""),K("")},className:`group relative bg-white rounded-lg p-1.5 md:p-2 border-2 transition-all duration-300 ${b===t.id?"border-green-500 bg-green-50 shadow-lg":"border-gray-200 hover:border-green-400 hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 mb-1 rounded-full flex items-center justify-center ${b===t.id?"bg-green-500":"bg-gray-100 group-hover:bg-green-100"}`,children:e.jsx(A,{size:16,className:`md:w-5 md:h-5 ${b===t.id?"text-white":"text-gray-600 group-hover:text-green-600"}`})}),e.jsx("h4",{className:"font-semibold text-gray-900 text-xs",children:t.name})]}),b===t.id&&e.jsx("div",{className:"absolute top-1 right-1 w-4 h-4 rounded-full bg-green-500 flex items-center justify-center",children:e.jsx(D,{size:10,className:"text-white"})})]},t.id))})]}),p&&b&&e.jsx("div",{className:"mt-3",children:le.requiresDualDeviceSelection?e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"p-3 bg-purple-50 border border-purple-200 rounded-lg",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-700 mb-2",children:"左臂手柄"}),e.jsx("div",{className:"grid grid-cols-3 gap-1.5 md:gap-2",children:de().map(t=>e.jsxs("button",{onClick:()=>t.status==="available"&&t.id!==g&&O(t.id),disabled:t.status==="in-use"||t.id===g,className:`group relative bg-white rounded-lg p-1.5 md:p-2 border-2 transition-all duration-300 ${t.status==="in-use"||t.id===g?"border-gray-200 opacity-50 cursor-not-allowed":c===t.id?"border-purple-500 bg-purple-50 shadow-lg":"border-gray-200 hover:border-purple-400 hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 mb-1 rounded-full flex items-center justify-center ${t.status==="in-use"||t.id===g?"bg-gray-100":c===t.id?"bg-purple-500":"bg-gray-100 group-hover:bg-purple-100"}`,children:e.jsx(A,{size:14,className:`${t.status==="in-use"||t.id===g?"text-gray-400":c===t.id?"text-white":"text-gray-600 group-hover:text-purple-600"}`})}),e.jsx("h4",{className:"font-semibold text-gray-900 text-xs",children:t.name}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${t.status==="in-use"||t.id===g?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:t.status==="in-use"?"使用中":t.id===g?"已选":"空闲"})]}),c===t.id&&e.jsx("div",{className:"absolute top-1 right-1 w-4 h-4 rounded-full bg-purple-500 flex items-center justify-center",children:e.jsx(D,{size:10,className:"text-white"})})]},t.id))})]}),e.jsxs("div",{className:"p-3 bg-indigo-50 border border-indigo-200 rounded-lg",children:[e.jsx("h3",{className:"text-xs font-medium text-gray-700 mb-2",children:"右臂手柄"}),e.jsx("div",{className:"grid grid-cols-3 gap-1.5 md:gap-2",children:de().map(t=>e.jsxs("button",{onClick:()=>t.status==="available"&&t.id!==c&&K(t.id),disabled:t.status==="in-use"||t.id===c,className:`group relative bg-white rounded-lg p-1.5 md:p-2 border-2 transition-all duration-300 ${t.status==="in-use"||t.id===c?"border-gray-200 opacity-50 cursor-not-allowed":g===t.id?"border-indigo-500 bg-indigo-50 shadow-lg":"border-gray-200 hover:border-indigo-400 hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 mb-1 rounded-full flex items-center justify-center ${t.status==="in-use"||t.id===c?"bg-gray-100":g===t.id?"bg-indigo-500":"bg-gray-100 group-hover:bg-indigo-100"}`,children:e.jsx(A,{size:14,className:`${t.status==="in-use"||t.id===c?"text-gray-400":g===t.id?"text-white":"text-gray-600 group-hover:text-indigo-600"}`})}),e.jsx("h4",{className:"font-semibold text-gray-900 text-xs",children:t.name}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${t.status==="in-use"||t.id===c?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:t.status==="in-use"?"使用中":t.id===c?"已选":"空闲"})]}),g===t.id&&e.jsx("div",{className:"absolute top-1 right-1 w-4 h-4 rounded-full bg-indigo-500 flex items-center justify-center",children:e.jsx(D,{size:10,className:"text-white"})})]},t.id))})]})]}):e.jsxs("div",{children:[e.jsx("h3",{className:"text-xs font-medium text-gray-700 mb-1",children:"选择设备"}),e.jsx("div",{className:"grid grid-cols-3 gap-1.5 md:gap-2",children:de().map(t=>e.jsxs("button",{onClick:()=>t.status==="available"&&O(t.id),disabled:t.status==="in-use",className:`group relative bg-white rounded-lg p-1.5 md:p-2 border-2 transition-all duration-300 ${t.status==="in-use"?"border-gray-200 opacity-50 cursor-not-allowed":c===t.id?"border-purple-500 bg-purple-50 shadow-lg":"border-gray-200 hover:border-purple-400 hover:shadow-md"}`,children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-8 h-8 md:w-10 md:h-10 mb-1 rounded-full flex items-center justify-center ${t.status==="in-use"?"bg-gray-100":c===t.id?"bg-purple-500":"bg-gray-100 group-hover:bg-purple-100"}`,children:e.jsx(A,{size:16,className:`md:w-5 md:h-5 ${t.status==="in-use"?"text-gray-400":c===t.id?"text-white":"text-gray-600 group-hover:text-purple-600"}`})}),e.jsx("h4",{className:"font-semibold text-gray-900 text-xs",children:t.name}),e.jsx("span",{className:`text-[10px] px-1.5 py-0.5 rounded-full ${t.status==="in-use"?"bg-yellow-100 text-yellow-700":"bg-green-100 text-green-700"}`,children:t.status==="in-use"?"使用中":"空闲"})]}),c===t.id&&e.jsx("div",{className:"absolute top-1 right-1 w-4 h-4 rounded-full bg-purple-500 flex items-center justify-center",children:e.jsx(D,{size:10,className:"text-white"})})]},t.id))})]})})]})}),e.jsxs("div",{className:"flex items-center justify-center gap-3 mt-2 md:mt-3 flex-shrink-0",children:[e.jsx(h,{onClick:()=>{X(""),U(""),O(""),K("")},className:"px-4 md:px-6 py-1.5 md:py-2 bg-white hover:bg-gray-50 text-gray-700 border-2 border-gray-300 rounded-lg font-medium text-sm",children:"重置"}),e.jsx(h,{onClick:()=>{N(!1),L(!0)},disabled:!Ne(),className:`px-4 md:px-6 py-1.5 md:py-2 rounded-lg font-medium text-sm ${Ne()?"bg-blue-600 hover:bg-blue-700 text-white shadow-lg hover:shadow-xl":"bg-gray-200 text-gray-400 cursor-not-allowed"}`,children:"下一步"})]})]})}),R&&e.jsx(Ie,{onBack:()=>{L(!1),N(!0)},onProceed:t=>{Q(t),Z(!0),L(!1),P(!1)},clipInfo:{clipId:Le.id,...le.buildSessionPayload(ve)}}),!o&&!R&&e.jsxs(e.Fragment,{children:[J&&v&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-4xl max-h-[90vh] flex flex-col",onWheel:t=>{t.stopPropagation()},children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-900",children:[v.id," - Clips表"]}),e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-600",children:[e.jsx(B,{size:14,className:"text-blue-600"}),e.jsx("span",{children:v.device})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-600",children:[e.jsx(A,{size:14,className:"text-blue-600"}),e.jsx("span",{children:v.controller})]}),e.jsxs("div",{className:"flex items-center gap-1.5 text-xs text-gray-600",children:[e.jsx(Xe,{size:14,className:"text-blue-600"}),e.jsxs("span",{children:[v.clipCount," 条Clips"]})]})]})]}),e.jsx("button",{onClick:()=>{he(!1),ge(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(oe,{size:20})})]}),e.jsx("div",{className:"overflow-y-scroll px-6 py-5",style:{scrollbarWidth:"thin",scrollbarColor:"#cbd5e1 #f1f5f9",maxHeight:"560px"},children:e.jsx("div",{className:"grid grid-cols-3 gap-4",children:Te(v.id).map(t=>e.jsxs("div",{className:"p-4 border border-gray-200 rounded-lg hover:border-blue-300 hover:bg-blue-50 cursor-pointer transition-all",onClick:()=>{G(t),ue(!0),T(!0)},children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-semibold text-gray-900",children:t.id}),e.jsx("span",{className:"text-xs text-gray-500",children:t.duration})]}),e.jsx("p",{className:"text-xs text-gray-600 mb-3 line-clamp-2",children:t.description}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("span",{className:"text-xs text-gray-400",children:t.time}),e.jsx("span",{className:"text-xs text-gray-500",children:t.duration})]})]},t.id))})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"text-xs text-gray-500",children:["采集时间: ",v.date," ",v.time]}),e.jsx(h,{onClick:()=>{he(!1),ge(null)},className:"px-4 py-2 bg-white hover:bg-gray-50 text-gray-700 border border-gray-300 rounded-md",children:"关闭"})]})]})}),Se&&w&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-xl w-full max-w-6xl max-h-[90vh] flex flex-col",children:[e.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"font-semibold text-gray-900",children:[w.id," - 详细信息"]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:w.description})]}),e.jsx("button",{onClick:()=>{T(!1),G(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:e.jsx(oe,{size:20})})]}),e.jsx("div",{className:"flex-1 overflow-y-auto px-6 py-5 bg-gray-50",children:e.jsx("div",{className:"relative mb-4",style:{height:"calc(75vh - 180px)"},children:e.jsxs("div",{className:"relative bg-black rounded-xl overflow-hidden shadow-lg w-full h-full",children:[e.jsx("img",{src:we,alt:"Clip回放",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs("div",{className:"flex items-center gap-2 bg-black/50 backdrop-blur-md text-white px-3 py-1.5 rounded-lg text-sm font-medium",children:[e.jsx(F,{size:14}),e.jsx("span",{children:"主摄像头"})]}),e.jsx("div",{className:"bg-black/50 backdrop-blur-md text-white px-3 py-1.5 rounded-lg text-sm",children:w.duration})]})}),q?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`absolute transition-all duration-300 bg-black rounded-lg overflow-hidden shadow-xl cursor-pointer border-2 border-white/20 hover:border-white/40 ${l==="both"?"bottom-4 right-[calc(33.33%+2rem)]":"bottom-4 right-4"}`,style:{width:l==="left"||l==="both"?"33.33%":"16.67%",aspectRatio:"4/3",...l===null&&{transform:"translateY(calc(-100% - 0.5rem))"},...l==="right"&&{transform:"translateY(calc(-200% - 1rem))"}},onClick:()=>V("left"),children:[e.jsx("img",{src:$,alt:"左臂视角",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-2",children:e.jsx("div",{className:"text-white text-xs font-medium",children:"左臂视角"})}),e.jsx("div",{className:"absolute top-2 right-2 bg-black/50 backdrop-blur-md text-white p-1 rounded",children:e.jsx(k,{size:12})})]}),e.jsxs("div",{className:"absolute transition-all duration-300 bg-black rounded-lg overflow-hidden shadow-xl cursor-pointer border-2 border-white/20 hover:border-white/40 bottom-4 right-4",style:{width:l==="right"||l==="both"?"33.33%":"16.67%",aspectRatio:"4/3",...l==="left"&&{transform:"translateY(calc(-200% - 1rem))"}},onClick:()=>V("right"),children:[e.jsx("img",{src:$,alt:"右臂视角",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-2",children:e.jsx("div",{className:"text-white text-xs font-medium",children:"右臂视角"})}),e.jsx("div",{className:"absolute top-2 right-2 bg-black/50 backdrop-blur-md text-white p-1 rounded",children:e.jsx(k,{size:12})})]})]}):e.jsxs("div",{className:"absolute transition-all duration-300 bg-black rounded-lg overflow-hidden shadow-xl cursor-pointer border-2 border-white/20 hover:border-white/40 bottom-4 right-4",style:{width:l==="hand"?"33.33%":"16.67%",aspectRatio:"4/3"},onClick:()=>z(l==="hand"?null:"hand"),children:[e.jsx("img",{src:$,alt:"右臂视角",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-2",children:e.jsx("div",{className:"text-white text-xs font-medium",children:"手部摄像头"})}),e.jsx("div",{className:"absolute top-2 right-2 bg-black/50 backdrop-blur-md text-white p-1 rounded",children:e.jsx(k,{size:12})})]})]})})}),e.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4 flex-1",children:[e.jsxs(h,{onClick:()=>{console.log("播放Clip:",w.id)},className:"px-6 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md font-medium flex items-center gap-2",children:[e.jsx(F,{size:16}),"播放"]}),e.jsxs("div",{className:"flex-1 max-w-md flex items-center gap-3",children:[e.jsxs("div",{className:"flex-1 bg-gray-200 rounded-full h-1.5 relative",style:{overflow:"visible"},children:[e.jsx("div",{className:"bg-blue-600 h-full transition-all duration-300 rounded-full",style:{width:`${1024/1608*100}%`}}),e.jsx("button",{onClick:t=>{t.stopPropagation(),t.preventDefault(),console.log("跳转到关键帧: 804")},className:"absolute -top-3 left-1/2 -translate-x-1/2 hover:scale-110 transition-transform cursor-pointer z-10",style:{pointerEvents:"auto"},title:"关键帧 (804帧)",children:e.jsxs("div",{className:"flex flex-col items-center pointer-events-none",children:[e.jsx("div",{className:"w-0 h-0 border-l-[7px] border-r-[7px] border-t-[10px] border-l-transparent border-r-transparent border-t-orange-500 drop-shadow-lg"}),e.jsx("div",{className:"w-1.5 h-2.5 bg-gradient-to-b from-orange-500 to-orange-600 -mt-0.5 drop-shadow-lg rounded-b-sm"})]})})]}),e.jsx("span",{className:"text-xs text-gray-600 font-medium min-w-[80px]",children:"1024 / 1608 帧"}),e.jsxs("select",{value:ze,onChange:t=>$e(Number(t.target.value)),className:"text-xs border border-gray-300 rounded px-2 py-1 bg-white hover:border-blue-400 focus:outline-none focus:border-blue-500 cursor-pointer",children:[e.jsx("option",{value:.25,children:"0.25x"}),e.jsx("option",{value:.5,children:"0.5x"}),e.jsx("option",{value:1,children:"1x"}),e.jsx("option",{value:2,children:"2x"}),e.jsx("option",{value:4,children:"4x"}),e.jsx("option",{value:8,children:"8x"})]})]}),e.jsxs("div",{className:"text-xs text-gray-500",children:["录制于 ",w.time]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(h,{onClick:()=>{T(!1),G(null),ue(!1)},className:"px-4 py-2 bg-white hover:bg-gray-50 text-gray-700 border border-gray-300 rounded-md",children:"返回"}),!De&&e.jsx(h,{onClick:()=>{console.log("删除Clip:",w.id),T(!1),G(null)},className:"px-4 py-2 bg-red-600 hover:bg-red-700 text-white rounded-md font-medium",children:"删除此Clip"})]})]})]})}),e.jsxs("div",{className:"flex-1 flex flex-col overflow-hidden",children:[e.jsx("div",{className:"flex-shrink-0 px-6 py-4 border-b border-gray-200 bg-white",children:e.jsx("div",{className:"flex items-center justify-between",children:e.jsx("div",{className:"flex items-center gap-3",children:e.jsxs(h,{onClick:()=>{X(""),U(""),Ce(""),ke(""),P(!0),y("idle"),Z(!1),Q("")},className:"flex items-center gap-2 px-4 py-2.5 bg-gray-600 hover:bg-gray-700 text-white font-medium rounded-lg transition-all",children:[e.jsx(oe,{size:18}),e.jsx("span",{children:"返回选择设备"})]})})})}),e.jsx("div",{className:"flex-1 overflow-y-auto p-6 bg-gray-50",children:e.jsxs("div",{className:"h-full flex gap-4",children:[e.jsx("div",{className:"relative flex-[3] camera-container",style:{height:"calc(100vh - 200px)"},children:e.jsxs("div",{className:"relative bg-black rounded-xl overflow-hidden shadow-lg w-full h-full",children:[e.jsx("img",{src:we,alt:"主摄像头",className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-4",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"flex items-center gap-2 bg-black/50 backdrop-blur-md text-white px-3 py-1.5 rounded-lg text-sm font-medium",children:e.jsx("span",{children:"主摄像头"})}),e.jsx("div",{className:"bg-black/50 backdrop-blur-md text-white px-3 py-1.5 rounded-lg text-sm",children:e.jsx("span",{children:"1080p 30fps"})})]})}),e.jsxs("div",{className:"absolute top-3 right-3 flex gap-2",children:[e.jsx("button",{className:"bg-black/50 backdrop-blur-md hover:bg-black/70 text-white p-2 rounded-lg transition-all",children:e.jsx(Be,{size:18})}),e.jsx("button",{className:"bg-black/50 backdrop-blur-md hover:bg-black/70 text-white p-2 rounded-lg transition-all",children:e.jsx(k,{size:18})})]}),q?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:`pip-container bg-black rounded-lg overflow-hidden shadow-xl border-2 border-white/20 hover:border-white/40 ${f==="left"?"cursor-grabbing":"cursor-grab"} ${a.left.x===0&&a.left.y===0?"absolute "+(l==="both"&&a.right.x===0&&a.right.y===0?"bottom-4 left-4":"bottom-4 right-4"):"fixed"}`,style:{width:x.left.width>0?`${x.left.width}px`:l==="left"||l==="both"?"33.33%":"16.67%",height:x.left.height>0?`${x.left.height}px`:void 0,aspectRatio:x.left.height>0?void 0:"4/3",...a.left.x!==0||a.left.y!==0?{left:`${a.left.x}px`,top:`${a.left.y}px`,zIndex:1e3}:{...l===null&&a.right.x===0&&a.right.y===0&&{transform:"translateY(calc(-100% - 0.5rem))"},...l==="right"&&a.right.x===0&&a.right.y===0&&{transform:"translateY(calc(-200% - 1rem))"}},transition:f==="left"||C==="left"?"none":"all 300ms"},onMouseDown:t=>te(t,"left"),onClick:()=>V("left"),children:[e.jsx("img",{src:$,alt:"左臂视角",className:"w-full h-full object-cover pointer-events-none"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-2 pointer-events-none",children:e.jsxs("div",{className:"text-white text-xs font-medium flex items-center gap-1",children:[e.jsx(ce,{size:12}),"左臂视角"]})}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-1",children:[e.jsx("button",{className:"bg-black/50 backdrop-blur-md text-white p-1 rounded hover:bg-black/70 transition-colors",onClick:t=>ee("left",t),title:"重置位置",children:e.jsx(xe,{size:12})}),e.jsx("div",{className:"bg-black/50 backdrop-blur-md text-white p-1 rounded pointer-events-none",children:e.jsx(k,{size:12})})]}),e.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-nwse-resize",style:{background:"linear-gradient(135deg, transparent 0%, transparent 50%, rgba(255,255,255,0.5) 50%, rgba(255,255,255,0.5) 100%)"},onMouseDown:t=>se(t,"left")})]}),e.jsxs("div",{className:`pip-container bg-black rounded-lg overflow-hidden shadow-xl border-2 border-white/20 hover:border-white/40 ${f==="right"?"cursor-grabbing":"cursor-grab"} ${a.right.x===0&&a.right.y===0?"absolute bottom-4 right-4":"fixed"}`,style:{width:x.right.width>0?`${x.right.width}px`:l==="right"||l==="both"?"33.33%":"16.67%",height:x.right.height>0?`${x.right.height}px`:void 0,aspectRatio:x.right.height>0?void 0:"4/3",...a.right.x!==0||a.right.y!==0?{left:`${a.right.x}px`,top:`${a.right.y}px`,zIndex:1e3}:{...l==="left"&&a.left.x===0&&a.left.y===0&&{transform:"translateY(calc(-200% - 1rem))"}},transition:f==="right"||C==="right"?"none":"all 300ms"},onMouseDown:t=>te(t,"right"),onClick:()=>V("right"),children:[e.jsx("img",{src:$,alt:"右臂视角",className:"w-full h-full object-cover pointer-events-none"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-2 pointer-events-none",children:e.jsxs("div",{className:"text-white text-xs font-medium flex items-center gap-1",children:[e.jsx(ce,{size:12}),"右臂视角"]})}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-1",children:[e.jsx("button",{className:"bg-black/50 backdrop-blur-md text-white p-1 rounded hover:bg-black/70 transition-colors",onClick:t=>ee("right",t),title:"重置位置",children:e.jsx(xe,{size:12})}),e.jsx("div",{className:"bg-black/50 backdrop-blur-md text-white p-1 rounded pointer-events-none",children:e.jsx(k,{size:12})})]}),e.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-nwse-resize",style:{background:"linear-gradient(135deg, transparent 0%, transparent 50%, rgba(255,255,255,0.5) 50%, rgba(255,255,255,0.5) 100%)"},onMouseDown:t=>se(t,"right")})]})]}):e.jsxs("div",{className:`pip-container bg-black rounded-lg overflow-hidden shadow-xl border-2 border-white/20 hover:border-white/40 ${f==="hand"?"cursor-grabbing":"cursor-grab"} ${a.hand.x===0&&a.hand.y===0?"absolute bottom-4 right-4":"fixed"}`,style:{width:x.hand.width>0?`${x.hand.width}px`:l==="hand"?"33.33%":"16.67%",height:x.hand.height>0?`${x.hand.height}px`:void 0,aspectRatio:x.hand.height>0?void 0:"4/3",...a.hand.x!==0||a.hand.y!==0?{left:`${a.hand.x}px`,top:`${a.hand.y}px`,zIndex:1e3}:{},transition:f==="hand"||C==="hand"?"none":"all 300ms"},onMouseDown:t=>te(t,"hand"),onClick:()=>{if(fe||je){Y(!1),_(!1);return}H(t=>({...t,hand:{x:0,y:0}})),M(t=>({...t,hand:{width:0,height:0}})),z(l==="hand"?null:"hand")},children:[e.jsx("img",{src:$,alt:"手部姿态",className:"w-full h-full object-cover pointer-events-none"}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-gradient-to-t from-black/80 to-transparent p-2 pointer-events-none",children:e.jsxs("div",{className:"text-white text-xs font-medium flex items-center gap-1",children:[e.jsx(ce,{size:12}),"手部摄像头"]})}),e.jsxs("div",{className:"absolute top-2 right-2 flex gap-1",children:[e.jsx("button",{className:"bg-black/50 backdrop-blur-md text-white p-1 rounded hover:bg-black/70 transition-colors",onClick:t=>ee("hand",t),title:"重置位置",children:e.jsx(xe,{size:12})}),e.jsx("div",{className:"bg-black/50 backdrop-blur-md text-white p-1 rounded pointer-events-none",children:e.jsx(k,{size:12})})]}),e.jsx("div",{className:"absolute bottom-0 right-0 w-4 h-4 cursor-nwse-resize",style:{background:"linear-gradient(135deg, transparent 0%, transparent 50%, rgba(255,255,255,0.5) 50%, rgba(255,255,255,0.5) 100%)"},onMouseDown:t=>se(t,"hand")})]})]})}),e.jsxs("div",{className:"flex-[2] flex flex-col",style:{height:"calc(100vh - 200px)"},children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs(h,{onClick:()=>{console.log("一键复位触发")},className:"flex items-center gap-2 px-4 py-2 bg-gray-700 hover:bg-gray-800 text-white font-medium rounded-lg transition-all",children:[e.jsx(Ue,{size:18}),e.jsx("span",{children:"一键复位"})]}),e.jsxs(h,{onClick:()=>{console.log("急停触发")},className:"flex items-center gap-2 px-5 py-2.5 bg-red-600 hover:bg-red-700 text-white font-medium rounded-lg shadow-md transition-all hover:shadow-lg",children:[e.jsx(Ze,{size:20}),e.jsx("span",{children:"一键急停"})]})]}),e.jsx("div",{className:"flex-1 bg-white rounded-xl border-2 border-gray-200 shadow-lg flex flex-col items-center justify-center p-8",children:j==="idle"?e.jsx("button",{onClick:()=>y("recording"),className:"w-64 h-64 rounded-full bg-blue-600 hover:bg-blue-700 text-white shadow-md hover:shadow-lg transition-all flex items-center justify-center group",children:e.jsxs("div",{className:"text-center",children:[e.jsx(F,{size:48,className:"mx-auto mb-3 group-hover:scale-105 transition-transform"}),e.jsx("div",{className:"text-xl font-medium",children:"准备开始录制"})]})}):e.jsxs("button",{onClick:()=>y("idle"),className:"w-64 h-64 rounded-full bg-blue-600 hover:bg-blue-700 text-white shadow-md hover:shadow-lg transition-all flex items-center justify-center group relative",children:[e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-1/2 text-5xl font-mono font-bold tracking-wider",children:Me(re)}),e.jsx("div",{className:"absolute top-1/2 left-1/2 -translate-x-1/2 translate-y-[2rem] text-xl font-medium text-white/80",children:"停止录制"})]})}),e.jsxs("div",{className:"mt-4 flex items-center justify-between gap-4",children:[e.jsxs(h,{onClick:()=>{y("idle"),ie(0)},className:"flex items-center gap-2 px-6 py-3 bg-gray-600 hover:bg-gray-700 text-white font-medium rounded-lg transition-all",children:[e.jsx(We,{size:20}),e.jsx("span",{children:"丢弃重采"})]}),e.jsxs(h,{onClick:()=>{console.log("完成采集，录制时长：",re),y("idle"),ie(0),Q(""),Z(!1),L(!0),P(!1)},className:"flex items-center gap-2 px-6 py-3 bg-blue-600 hover:bg-blue-700 text-white font-medium rounded-lg shadow-md transition-all hover:shadow-lg",disabled:re===0,children:[e.jsx(D,{size:20}),e.jsx("span",{children:"完成采集"})]})]})]})]})})]})]})]})}export{pt as default};
